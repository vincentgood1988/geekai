# Build stage for Vue.js app
FROM node:17-alpine3.14 AS builder
WORKDIR /app
# Copy the source files from the web folder
COPY ../web /app
# Install dependencies and build the app
RUN npm config set registry https://registry.npm.taobao.org/
RUN npm install
RUN npm run build

FROM nginx:1.20.2

WORKDIR /var/www/app
COPY --from=builder /app/dist /var/www/app/dist

EXPOSE 80
EXPOSE 443
EXPOSE 8080
